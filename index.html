<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Municipal Election Intelligence Dashboard</title>

<link href="https://fonts.googleapis.com/css2?family=Anek+Devanagari:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<style>
:root{
 --orange:#f97316;
 --green:#16a34a;
 --bg:#f1f5f9;
 --card:#ffffff;
 --black:#000;
 --muted:#475569;
}

*{box-sizing:border-box;font-family:'Anek Devanagari',sans-serif;}
body{margin:0;background:var(--bg);color:#0f172a}

header{
 position:sticky;
 top:0;
 z-index:100;
 background:linear-gradient(90deg,var(--orange),var(--green));
 color:#fff;
 padding:22px 32px;
 font-size:26px;
 font-weight:700;
 box-shadow:0 4px 20px rgba(0,0,0,.15);
}

.main{
 max-width:1600px;
 margin:auto;
 padding:28px;
}

/* TABS */
.tabs{
 display:flex;
 gap:12px;
 margin-bottom:24px;
}
.tab{
 padding:10px 22px;
 border-radius:5px;
 background:#fff;
 cursor:pointer;
 font-weight:600;
 box-shadow:0 2px 8px rgba(0,0,0,.08);
 transition:.2s;
}
.tab.active{
 background:var(--orange);
 color:#fff;
 box-shadow:0 6px 16px rgba(249,115,22,.45);
}

/* GRID */
.grid{
 display:grid;
 grid-template-columns:repeat(auto-fill,minmax(340px,1fr));
 gap:20px;
}

/* CARD */
.card{
 background:var(--card);
 border:none;
 border-radius:12px;
 padding:18px;
 cursor:pointer;
 transition:.2s;
 box-shadow:0 10px 25px rgba(0,0,0,.08);
}
.card:hover{
 transform:translateY(-3px);
 box-shadow:0 18px 35px rgba(0,0,0,.12);
}

.card strong{font-size:17px;}
.card p{
 margin-top:10px;
 font-size:14px;
 color:var(--muted);
 line-height:1.5;
}

/* MODAL */
.modal{
 position:fixed;
 inset:0;
 background:var(--bg);
 display:none;
 z-index:200;
 overflow:auto;
}
.modal.active{display:block;}

.modal-header{
 padding:18px 24px;
 border-bottom:1px solid var(--black);
 display:flex;
 justify-content:space-between;
 align-items:center;
 background:#fff;
 box-shadow:0 6px 16px rgba(0,0,0,.1);
}
.close{font-size:24px;cursor:pointer}

/* SEATS */
.seats{
 display:grid;
 grid-template-columns:repeat(auto-fit,minmax(260px,1fr));
 gap:18px;
 margin-top:24px;
}
.seat{
 border:none;
 border-radius:12px;
 padding:16px;
 background:#f0fdf4;
 cursor:pointer;
 box-shadow:0 6px 14px rgba(0,0,0,.1);
 transition:.2s;
}
.seat:hover{background:#ecfdf5; transform:translateY(-2px);}

/* BADGE */
.badge{
 display:inline-block;
 padding:5px 10px;
 border-radius:5px;
 background:#dcfce7;
 font-size:13px;
 margin-bottom:6px;
}

/* TABLE */
table{
 width:100%;
 border-collapse:collapse;
 margin-top:14px;
 font-size:14px;
}
th,td{
 border:1px solid var(--black);
 padding:6px 8px;
 text-align:left;
}
th{
 background:#f97316;
 color:#fff;
 font-weight:600;
}

/* BOX */
.box{
 margin-top:22px;
 border-radius:14px;
 padding:18px;
 background:#fff;
 box-shadow:0 12px 28px rgba(0,0,0,.1);
}

/* ACTION & TRACKER */
.action{background:#f0fdf4;}
.tracker{background:#fff7ed;}

/* MERGED TOP CANDIDATE BAR */
.merged-bar{
 display:flex;
 height:30px;
 width:100%;
 border-radius:8px;
 overflow:hidden;
 font-weight:600;
 color:#fff;
 margin-top:8px;
 box-shadow:0 2px 6px rgba(0,0,0,.15);
}
.fill-a{background:#f97316; display:flex; align-items:center; justify-content:center;}
.fill-b{background:#16a34a; display:flex; align-items:center; justify-content:center;}
</style>
</head>

<body>

<header>üèô Municipal Corporation ‚Äì Election Intelligence Dashboard</header>

<div class="main">

 <div class="tabs">
  <div class="tab active" onclick="setAssembly(1)">Assembly 1 (Ward 1‚Äì9)</div>
  <div class="tab" onclick="setAssembly(2)">Assembly 2 (Ward 10‚Äì15)</div>
 </div>

 <div class="grid" id="wardGrid"></div>
</div>

<!-- WARD MODAL -->
<div class="modal" id="wardModal">
 <div class="modal-header">
  <h2 id="wardTitle"></h2>
  <div class="close" onclick="closeWard()">‚úï</div>
 </div>
 <div class="main">
  <div class="seats" id="seatGrid"></div>
 </div>
</div>

<!-- SEAT MODAL -->
<div class="modal" id="seatModal">
 <div class="modal-header">
  <h2 id="seatTitle"></h2>
  <div class="close" onclick="closeSeat()">‚úï</div>
 </div>

 <div class="main">

  <canvas id="trendChart" height="120"></canvas>

  <!-- Top Candidate Merged Bar -->
  <div class="box">
   <h3>üèÜ Top Candidates (Vote Share %)</h3>
   <div id="topCandidatesBar"></div>
  </div>

  <!-- Candidate Table -->
  <div class="box">
   <h3>üë• Candidate List</h3>
   <table id="candidateTable"></table>
  </div>

  <div class="box action">
   <h3>üéØ ‡§µ‡§ø‡§ú‡§Ø‡§æ‡§∏‡§æ‡§†‡•Ä ‡§ï‡•É‡§§‡•Ä ‡§Ü‡§∞‡§æ‡§ñ‡§°‡§æ</h3>
   <ul>
    <li>‡§™‡•ç‡§∞‡§≠‡§æ‡§ó‡§®‡§ø‡§π‡§æ‡§Ø ‡§Æ‡§§‡§¶‡§æ‡§∞ ‡§∏‡§Ç‡§™‡§∞‡•ç‡§ï ‡§µ‡§æ‡§¢‡§µ‡§æ</li>
    <li>‡§Æ‡§π‡§ø‡§≤‡§æ ‡§µ ‡§Ø‡•Å‡§µ‡§ï ‡§∏‡§Ç‡§µ‡§æ‡§¶ ‡§Æ‡•ã‡§π‡§ø‡§Æ‡§æ</li>
    <li>‡§∏‡•ç‡§•‡§æ‡§®‡§ø‡§ï ‡§®‡§æ‡§ó‡§∞‡•Ä ‡§Æ‡•Å‡§¶‡•ç‡§¶‡•á ‡§Ö‡§ß‡•ã‡§∞‡•á‡§ñ‡§ø‡§§ ‡§ï‡§∞‡§æ</li>
   </ul>
  </div>

  <div class="box tracker">
   <h3>üìä Daily Campaign Inputs</h3>
   <ul>
    <li>Household interactions: 420</li>
    <li>Booth meetings: 4</li>
    <li>Active volunteers: 31</li>
    <li>Main issues: Water, Roads, Drainage</li>
   </ul>
  </div>

 </div>
</div>

<script>
const wardSummaries=[
 "‡§¶‡§æ‡§ü ‡§≤‡•ã‡§ï‡§µ‡§∏‡•ç‡§§‡•Ä‡§ö‡§æ ‡§™‡•ç‡§∞‡§≠‡§æ‡§ó. ‡§™‡§æ‡§£‡•Ä ‡§µ ‡§∞‡§∏‡•ç‡§§‡•á ‡§Æ‡•Å‡§¶‡•ç‡§¶‡•á.",
 "‡§µ‡•ç‡§Ø‡§æ‡§™‡§æ‡§∞‡•Ä ‡§≠‡§æ‡§ó. ‡§∏‡•ç‡§µ‡§ö‡•ç‡§õ‡§§‡§æ ‡§µ ‡§™‡§æ‡§∞‡•ç‡§ï‡§ø‡§Ç‡§ó ‡§∏‡§Æ‡§∏‡•ç‡§Ø‡§æ.",
 "‡§Æ‡§ø‡§∂‡•ç‡§∞ ‡§≤‡•ã‡§ï‡§∏‡§Ç‡§ñ‡•ç‡§Ø‡§æ. ‡§Ü‡§∞‡•ã‡§ó‡•ç‡§Ø ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§Æ‡§π‡§§‡•ç‡§§‡•ç‡§µ‡§æ‡§ö‡•Ä.",
 "‡§ú‡•Å‡§®‡§æ ‡§∞‡§π‡§ø‡§µ‡§æ‡§∏‡•Ä ‡§≠‡§æ‡§ó. ‡§®‡§æ‡§ó‡§∞‡•Ä ‡§∏‡•á‡§µ‡§æ ‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§æ.",
 "‡§®‡§µ‡•Ä‡§® ‡§µ‡§∏‡§æ‡§π‡§§‡•Ä. ‡§™‡§æ‡§Ø‡§æ‡§≠‡•Ç‡§§ ‡§∏‡•Å‡§µ‡§ø‡§ß‡§æ ‡§™‡•ç‡§∞‡§∂‡•ç‡§®.",
 "‡§ù‡•ã‡§™‡§°‡§™‡§ü‡•ç‡§ü‡•Ä ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä.",
 "‡§Æ‡§π‡§ø‡§≤‡§æ ‡§Æ‡§§‡§¶‡§æ‡§∞ ‡§™‡•ç‡§∞‡§≠‡§æ‡§µ‡•Ä.",
 "‡§∂‡•à‡§ï‡•ç‡§∑‡§£‡§ø‡§ï ‡§∏‡§Ç‡§∏‡•ç‡§•‡§æ ‡§Ö‡§∏‡§≤‡•á‡§≤‡§æ ‡§≠‡§æ‡§ó.",
 "‡§µ‡•ç‡§Ø‡§æ‡§µ‡§∏‡§æ‡§Ø‡§ø‡§ï ‡§µ ‡§®‡§ø‡§µ‡§æ‡§∏‡•Ä ‡§Æ‡§ø‡§∂‡•ç‡§∞.",
 "‡§î‡§¶‡•ç‡§Ø‡•ã‡§ó‡§ø‡§ï ‡§™‡§∞‡§ø‡§∏‡§∞.",
 "‡§®‡§µ‡•Ä‡§® ‡§µ‡§ø‡§∏‡•ç‡§§‡§æ‡§∞ ‡§ï‡•ç‡§∑‡•á‡§§‡•ç‡§∞.",
 "‡§ú‡•Å‡§®‡§æ ‡§¨‡§æ‡§ú‡§æ‡§∞ ‡§≠‡§æ‡§ó.",
 "‡§®‡§¶‡•Ä‡§ï‡§æ‡§† ‡§≠‡§æ‡§ó.",
 "‡§®‡§ó‡§∞‡§µ‡§ø‡§ï‡§æ‡§∏ ‡§ï‡§æ‡§Æ‡•á ‡§∏‡•Å‡§∞‡•Ç.",
 "‡§∂‡§π‡§∞ ‡§∏‡•Ä‡§Æ‡•á‡§µ‡§∞‡•Ä‡§≤ ‡§≠‡§æ‡§ó."
];

const parties=["Party A","Party B","Party C","Independent","Local Front"];

function genCandidates(){
 let c=[];
 const count=5+Math.floor(Math.random()*4);
 for(let i=1;i<=count;i++){
  c.push({name:`Candidate ${i}`,party:parties[Math.floor(Math.random()*parties.length)]});
 }
 return c;
}

const wards=[];
for(let i=1;i<=15;i++){
 wards.push({
  name:`Ward ${i}`,
  summary:wardSummaries[i-1],
  seats:[
   {n:"A",cat:"SC Women",c:genCandidates()},
   {n:"B",cat:"OBC",c:genCandidates()},
   {n:"C",cat:"Open Women",c:genCandidates()},
   {n:"D",cat:"Open",c:genCandidates()}
  ]
 });
}

let activeAsm=1;
const grid=document.getElementById("wardGrid");

function setAssembly(a){
 activeAsm=a;
 document.querySelectorAll(".tab").forEach(t=>t.classList.remove("active"));
 event.target.classList.add("active");
 renderWards();
}

function renderWards(){
 grid.innerHTML="";
 wards.filter(w=>activeAsm===1?+w.name.split(" ")[1]<=9:+w.name.split(" ")[1]>9)
 .forEach(w=>{
  const card=document.createElement("div");
  card.className="card";
  card.innerHTML=`<strong>${w.name}</strong><p>${w.summary}</p>`;
  card.onclick=()=>openWard(w);
  grid.appendChild(card);
 });
}

function openWard(w){
 wardModal.classList.add("active");
 wardTitle.textContent=`${w.name} ‚Äì Seat Overview`;
 seatGrid.innerHTML=w.seats.map(s=>`
  <div class="seat" onclick='openSeat("${w.name}","${s.n}","${s.cat}")'>
   <span class="badge">${s.cat}</span><br>
   Seat ${s.n}
  </div>
 `).join("");
}

function closeWard(){wardModal.classList.remove("active")}

let chart;
function openSeat(ward,seat,cat){
 seatModal.classList.add("active");
 seatTitle.textContent=`${ward} ‚Äì Seat ${seat} (${cat})`;

 const seatData=wards.find(w=>w.name===ward).seats.find(s=>s.n===seat);

 // Top 2 candidates with vote share
 const sorted=[...seatData.c].slice(0,2);
 const p1=56, p2=44; // sum must be 100

 document.getElementById("topCandidatesBar").innerHTML=`
  <div class="merged-bar">
   <div class="fill-a" style="width:${p1}%">${sorted[0].name} ${p1}%</div>
   <div class="fill-b" style="width:${p2}%">${p2}% ${sorted[1].name}</div>
  </div>
 `;

 document.getElementById("candidateTable").innerHTML=
 `<tr><th>#</th><th>Candidate Name</th><th>Party</th></tr>`+
 seatData.c.map((x,i)=>`<tr><td>${i+1}</td><td>${x.name}</td><td>${x.party}</td></tr>`).join("");

 if(chart)chart.destroy();
 chart=new Chart(document.getElementById("trendChart"),{
  type:"line",
  data:{
   labels:["Day -4","Day -3","Day -2","Day -1","Today"],
   datasets:[
    {label:"Support",data:[48,50,52,53,56],borderColor:"#f97316",tension:.4},
    {label:"Opposition",data:[52,50,48,47,44],borderColor:"#16a34a",tension:.4}
   ]
  },
  options:{
   plugins:{legend:{position:"bottom"}},
   scales:{y:{min:40,max:60}}
  }
 });
}

function closeSeat(){seatModal.classList.remove("active")}

renderWards();
</script>

</body>
</html>
